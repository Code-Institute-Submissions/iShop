{% extends 'base.html' %}

{% load static from staticfiles %}

{% block title %}Cart{% endblock %}

{% load bootstrap_tags %}

<!-- cart content -->
{% block content %}
<div class="mt-5 text-danger text-capitalize">
    <h1>your shopping list</h1>
</div>
<div class="row row-flex">
    <table class="table mt-5">
  <thead class="btn-secondary mt-3 mb-3">
    <tr>
      <th scope="col">Product</th>
      <th scope="col">Name</th>
      <th scope="col">Price</th>
      <th scope="col">Quantity</th>
      <th scope="col">Change Quantity</th>
    </tr>
  </thead>
  {% for item in cart_items %}
  <tbody>
    <tr>
      <td><div  class="product-image" style="background-image: url('{{ MEDIA_URL }}{{ item.product.image }}')"></div></td>
      <td>{{ item.product.name }}</td>
      <td>${{ item.product.price }}</td>
      <td>{{item.quantity}}</td>
      <td>
        <form class="form-inline" method="post" action="{% url 'adjust_cart' item.id %}">
            {% csrf_token %}
            <div class="form-group">
                <label class="sr-only">New Quantity</label>
                <div class="input-group">
                    <input name="quantity" type="number" min="0" max="50" class="form-control mr-3">
                </div>
            </div>
            <button type="submit" class="btn btn-secondary"><span class="glyphicon glyphicon-edit" aria-hidden="true"></span>Amend</button>
        </form>
      </td>
    </tr>
  </tbody>
  {% endfor %}
</table>
    
</div>
<hr class="mt-5">
<!-- Checkout -->
<div class="row mt-5 mb-5">
    <p>Total: <span class="glyphicon glyphicon-euro" aria-hidden="true"></span>${{ total }}</p><br><hr>
    <a href="{% url 'checkout' %}" class="btn btn-warning" role="button"><span class="fn fn-ok-sign" aria-hidden="true"></span>Checkout</a></br></hr>
{% endblock %}
</div>